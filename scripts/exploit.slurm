#!/bin/bash

#SBATCH --job-name=exploiter
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=1
#SBATCH --mem=16G
#SBATCH --time=5-00:00:00 
#SBATCH --partition=normal 
#SBATCH --qos=normal 
#SBATCH --output=/clusteruy/home/juan.filevich/stdout/gotruco-tab-ai/%x.%j.out
#SBATCH --error=/clusteruy/home/juan.filevich/stdout/gotruco-tab-ai/%x.%j.out
#SBATCH --mail-type=BEGIN,END,FAIL
#SBATCH --mail-user=juan.filevich@fing.edu.uy 

hr (){
    printf '%*s\n' 80 | tr ' ' '-'
}

cat $0

hr
free -mh
lscpu | head -n25

hr

echo "args"
echo $@

hr

cd $HOME/Workspace/truco-ai/truco-mccfr-ai
go run cmd/eval/exploit/main.go \
    -p=${1} \
    -hash=${2} \
    -info=${3} \
    -abs=${4} \
    -threads=${5} \
    -dir=${6} \
    -eval=${7} \
    -run=${8} \
    -prunning=${9} \
    -prunning_prob=${10} \
    -save_every=${11} \
    -eval_every=${12} \
    -silent=${13} \
    -fully_silent=${14} \
    -prefix=${15} \
    -dataset=${16} \
    -exploited=${17} \
    -exploiter=${18}

hr
echo "done $(date)"